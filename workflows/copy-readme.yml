name: Copy README to docs/

on:
  push:
    branches:
      - main
  workflow_dispatch:  # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½ã«ã™ã‚‹

jobs:
  copy-readme:
    runs-on: ubuntu-latest

    steps:
      - name: âœ… ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v3

      - name: ğŸ“„ README.md ã‚’ docs/ ã«è¤‡è£½
        run: |
          mkdir -p docs
          cp README.md docs/README.md

      - name: ğŸ“¤ docs/README.md ã‚’ã‚³ãƒŸãƒƒãƒˆï¼†ãƒ—ãƒƒã‚·ãƒ¥
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "41898282+github-actions[bot]@users.noreply.github.com"

          # ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã®ã¿ã‚³ãƒŸãƒƒãƒˆ
          if ! git diff --quiet docs/README.md; then
            git add docs/README.md
            git commit -m "ğŸ”„ Auto-update docs/README.md from root README.md"
            git push
          else
            echo "âœ… docs/README.md ã«å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“"
          fi
